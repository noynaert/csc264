GAS LISTING numbers.s 			page 1


   1              	/*
   2              	   calculating addresses
   3              	*/
   4              	
   5              	.globl main
   6              	.data
   7 0000 2A040000 	    years: .quad  1066, 1492, 1776, 2020
   7      00000000 
   7      D4050000 
   7      00000000 
   7      F0060000 
   8 0020 54686520 	    format:   .asciz "The year is %d.\n"
   8      79656172 
   8      20697320 
   8      25642E0A 
   8      00
   9 0031 02000000 	    index: .quad  2
   9      00000000 
  10              	
  11              	.text
  12              	main:
  13              	//    andq  $-16,%rsp
  14              	
  15              	
  16              	
  17              	/*
  18              	    xor %rax, %rax
  19              	    movq $format,%rdi
  20              	    movq years,%rsi
  21              	    call printf
  22              	*/
  23              	
  24 0000 49C7C601 	    movq $1,  %r14
  24      000000
  25 0007 49C7C700 	    movq $years, %r15
  25      000000
  26 000e 4831C0   	    xor %rax, %rax
  27 0011 48C7C700 	    movq $format, %rdi
  27      000000
  28              	    #movq years,%rsi
  29 0018 4B8B74F7 	    movq 8(%r15,%r14,8), %rsi
  29      08
  30 001d E8000000 	    call printf
  30      00
  31              	
  32              	    /*
  33              	    #print the third character (which will be base + 2)
  34              	    movq $2, %r15 #set index to r15
  35              	    xor %rax, %rax
  36              	    movq $format, %rdi
  37              	    movb animal, index(%sil)
  38              	    movb animal, index(%dl)
  39              	    movb animal, index(%cl)
  40              	    call printf
  41              	    */
  42              	_exit:
  43 0022 48C7C03C 	   movq $60,  %rax
GAS LISTING numbers.s 			page 2


  43      000000
  44 0029 4831FF   	   xor  %rdi, %rdi
  45 002c 0F05     	   syscall
  46              	
